# System Patterns

The core architectural pattern is a static site generated by Jekyll.

- **Content-as-Data:** All wiki pages and blog posts are stored as Markdown files in the `wiki/` and `_posts/` directories, respectively.
- **Remote Theming:** The project uses Jekyll's `remote_theme` feature to pull in the `git-wiki-theme`. This means the theme's files are not directly in this repository, but are fetched during the Jekyll build process. This keeps the wiki's content separate from the theme's presentation logic.
- **3-Column Layout Pattern:** The site uses a modern CSS Grid layout (`.main-layout`) with three primary areas:
  - **Sidebar:** Fixed full-height navigation on the left.
  - **Main Content:** The central area for Markdown rendering.
  - **Right Column:** A dedicated space for page actions, metadata cards, and the Table of Contents. This keeps the main content clean and focused.
- **Internal Linking Pattern:** To ensure links work across different permalink structures (e.g., wiki pages vs. blog posts), internal links to wiki entities MUST use the `{{ site.baseurl }}/Basename` format.
  - This avoids issues with relative paths (`../`) when pages have different directory depths.
  - The `apply_links.py` script enforces this pattern automatically.
- **Dockerized Environment:** The `docker-compose.yml` file defines services for running the Jekyll site locally in a containerized environment, ensuring consistency across different development machines.
- **Modular Theme Architecture:** The `git-wiki-theme` is designed with a modular architecture based on **components** and **including hooks**.
  - **Components:** Reusable UI elements located in `_includes/git-wiki/components/` (e.g., `action_btn`, `search`, `toc`).
  - **Including Hooks:** The theme provides hooks (e.g., `inc_after_head`, `inc_before_page_list`) in `_config.yml` to inject custom HTML without modifying the core theme files. This allows for safe customization.
  - **Search Engines:** The theme supports multiple search engines (JS-based, GitHub-based, Google CSE), configurable via `_config.yml`.
  - **Internal Themes:** The theme includes several preset styles (default, lux, united, github) that can be switched via configuration.
- **Extensibility via Includes:** The `git-wiki-theme` allows for customization by including custom HTML files via the `_includes` directory and `inc_*` settings in `_config.yml`. The project currently uses this to add a custom sidebar.
